<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Invoice</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container pt-5">
      <h1 class="text-center">Inovice Helper</h1>
      <form
        method="GET"
        action="#"
        onsubmit="formIsSubmitted(getFromInput, file)"
        class="mt-5"
      >
        <h5>Header</h5>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Invoice Number"
              aria-label="Invoice Number"
              id="invoiceNumber"
            />
          </div>
          <div class="col">
            <input
              type="date"
              class="form-control"
              placeholder="Expire Date"
              aria-label="Expire Date"
              id="expireDate"
            />
          </div>
          <div class="col">
            <label class="d-inline me-2" for="logo">LOGO</label>
            <input
              class="form-control w-75 d-inline"
              type="file"
              id="logo"
              onchange="getImageData(this)"
              accept="image/png, image/jpeg"
            />
          </div>
        </div>
        <h5 class="mt-3">Sender</h5>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="First name"
              aria-label="First name"
              id="firstNameSender"
            />
          </div>
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Last name"
              aria-label="Last name"
              id="lastNameSender"
            />
          </div>
          <div class="col">
            <input
              type="email"
              class="form-control"
              placeholder="Email Address"
              aria-label="Email Address"
              id="emailAddressSender"
            />
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Address"
              aria-label="AddressSender"
              id="address"
            />
          </div>
        </div>
        <h5 class="mt-3">Recevier</h5>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="First name"
              aria-label="First name"
              id="firstNameRecevier"
            />
          </div>
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Last name"
              aria-label="Last name"
              id="lastNameRecevier"
            />
          </div>
          <div class="col">
            <input
              type="email"
              class="form-control"
              placeholder="Email Address"
              aria-label="Email Address"
              id="emailAddressRecevier"
            />
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Address"
              aria-label="Address"
              id="addressRecevier"
            />
          </div>
        </div>
        <h5 class="mt-3">Product List</h5>
        <div id="productList">
          <div class="row mt-3">
            <div class="col">
              <input
                type="text"
                class="form-control"
                placeholder="Label"
                aria-label="Label"
                id="label"
              />
            </div>
            <div class="col">
              <input
                type="text"
                class="form-control"
                placeholder="Quantity"
                aria-label="Quantity"
                id="quantity"
                min="0"
              />
            </div>
            <div class="col">
              <input
                type="number"
                class="form-control"
                placeholder="Price"
                aria-label="Price"
                id="price"
                min="0"
              />
            </div>
            <div class="col">
              <input
                type="text"
                class="form-control w-50 me-2 d-inline"
                placeholder="Discount"
                aria-label="Discount"
                id="discount"
                min="0"
                max="100"
              />
              <label for="discount" class="d-inline">%</label>
            </div>
            <div class="col">
              <select
                id="taxed"
                class="form-select w-75"
                aria-label="Default select example"
              >
                <option selected>Tax</option>
                <option value="11">PPN 11%</option>
                <option value="15">PPh 15%</option>
              </select>
            </div>
            <div class="col">
              <button
                id="delete"
                class="btn btn-danger"
                type="button"
                onclick="deleteRow(this)"
                style="float: right"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
        <button id="addProduct" class="btn btn-primary mt-3" type="button">
          Add
        </button>
        <h5 class="mt-3">Payment Detail</h5>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Bank Name"
              aria-label="Bank Name"
              id="bankName"
            />
          </div>
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Bank Branch"
              aria-label="Bank Branch"
              id="bankBranch"
            />
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Account Name"
              aria-label="Account Name"
              id="accountName"
            />
          </div>
          <div class="col">
            <input
              type="text"
              class="form-control"
              placeholder="Account Number"
              aria-label="Account Number"
              id="accountNumber"
            />
          </div>
          <div class="col">
            <!-- <div class="form-floating"> -->
            <input
              type="text"
              class="form-control"
              placeholder="Payment Reference"
              aria-label="Payment Reference"
              id="paymentReference"
            />
            <!-- <label for="floatingInput">Payment Reference</label> -->
            <!-- </div> -->
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <div class="form-floating">
              <textarea
                class="form-control"
                placeholder="Customer Reference"
                aria-label="Customer Reference"
                id="customerReference"
              ></textarea>
              <label for="floatingTextarea">Customer Reference</label>
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Submit</button>
      </form>
    </div>
    <!-- all form must be using form floating -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.6.3.slim.min.js"
      integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo="
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.41/vue.global.prod.min.js"
      integrity="sha512-0bHFSq8ASKChkYlLEzEnqpH3H/RSqL7UvhhOmSPz5JxozXuMge8JtNuv/0cgZRv2ZUR0GO9rdo576xUbKcrNIg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"
      integrity="sha512-a9NgEEK7tsCvABL7KqtUTQjl69z7091EVPpw5KxPlZ93T141ffe1woLtbXTX+r2/8TtTvRX/v4zTL2UlMUPgwg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.min.js"
      integrity="sha512-P0bOMePRS378NwmPDVPU455C/TuxDS+8QwJozdc7PGgN8kLqR4ems0U/3DeJkmiE31749vYWHvBOtR+37qDCZQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script src="./getFromInput.js"></script>

    <script type="text/javascript"></script>

    <script src="./productEelement.js"></script>

    <script type="text/javascript">
      let productNumber = 0;

      $("#addProduct").click(() => {
        productNumber++;
        $("#productList").append(productElement(productNumber));
        console.log("add productNumber", productNumber);
      });

      const deleteRow = (element) => {
        productNumber--;
        console.log($("button").index(element));
        const index = $("button").index(element);
        $("#productList .row")[index].remove();
        console.log("delete productNumber", productNumber);
      };

      let file;
      const getImageData = (image) => {
        file = image.files[0];
      };

      const toBase64 = async (file) =>
        new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.readAsDataURL(file);
          reader.onload = () => resolve(reader.result);
          reader.onerror = (error) => reject(error);
        });
    </script>

    <script src="printPdf.js"></script>
    <script src="./getProductInput.js"></script>
    <script src="submitForm.js"></script>
  </body>
</html>
